(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{188:(e,t,s)=>{"use strict";s.d(t,{P:()=>l,E:()=>d});var r=s(7828),i=s(1059),a=s(4650),n=s(730);class o{static mapToDossier(e){let t=new r.O;if(t.setId(e.id),t.setTitre(e.titre),t.setDescription(e.description),e.utilisateur){let s=new n._;s.setUsername(e.utilisateur.username),t.setUtilisateur(s)}return t}static mapToBlog(e){let t=new i.d;if(t.setId(e.id),t.setNom(e.titre||e.nom),t.setDateCreation(new Date(e.dateCreation)),e.utilisateur){let s=new n._;s.setUsername(e.utilisateur.username),t.setUtilisateur(s)}if(e.messages&&Array.isArray(e.messages)){let s=e.messages.map(e=>o.mapToMessage(e));t.setMessages(s)}return t}static mapToMessage(e){let t=new a.Q;t.setContenu(e.contenu),t.setDate(new Date(e.date));let s=new n._;return s.setUsername(e.utilisateur.username),t.setUtilisateur(s),t}}class u{async getAllDossiers(){let e="".concat(this.apiBaseUrl,"/dossiers/liste"),t=await fetch(e);if(!t.ok)throw Error("Erreur lors de la r\xe9cup\xe9ration des dossiers : ".concat(t.statusText));let s=await t.json(),r=[];return s.forEach(e=>{r.push(o.mapToDossier(e))}),r}async getBlogsForDossier(e){let t="".concat(this.apiBaseUrl,"/blogs/liste/").concat(e),s=await fetch(t);if(!s.ok)throw Error("Erreur lors de la r\xe9cup\xe9ration des blogs pour le dossier ".concat(e," : ").concat(s.statusText));let r=await s.json(),i=[];for(let e of r){let t=o.mapToBlog(e);i.push(t)}return i}async getMessagesForBlog(e,t){let s="".concat(this.apiBaseUrl,"/messages/liste/").concat(t,"/").concat(e),r=await fetch(s);if(!r.ok)throw Error("Erreur lors de la r\xe9cup\xe9ration des messages pour le blog ".concat(e," dans le dossier ").concat(t," : ").concat(r.statusText));let i=await r.json(),a=[];return i.forEach(e=>{a.push(o.mapToMessage(e))}),a}constructor(e){this.apiBaseUrl=e}}let l={I_BlogService:Symbol.for("I_BlogService")};class d{static get(e){return this.instances.has(e)||this.instances.set(e,this.createInstance(e)),this.instances.get(e)}static createInstance(e){if(e===l.I_BlogService)return new u("http://localhost:3001/api");throw Error("Interface inconnue pour factory : "+e.toString())}}d.instances=new Map},730:(e,t,s)=>{"use strict";s.d(t,{_:()=>r});class r{getUsername(){return this.username}setUsername(e){this.username=e}getMotDePasse(){return this.motDePasse}setMotDePasse(e){this.motDePasse=e}getEstAdmin(){return this.estAdmin}setEstAdmin(e){this.estAdmin=e}toJSON(){return{username:this.username,motDePasse:this.motDePasse,estAdmin:this.estAdmin}}static fromJSON(e){let t=new r;return t.setUsername(e.username),t.setMotDePasse(e.motDePasse),t.setEstAdmin(e.estAdmin),t}constructor(){this.username="",this.motDePasse="",this.estAdmin=!1}}},1059:(e,t,s)=>{"use strict";s.d(t,{d:()=>a});var r=s(4650),i=s(730);class a{getId(){return this.id}setId(e){this.id=e}getNom(){return this.nom}setNom(e){this.nom=e}getDateCreation(){return this.dateCreation}setDateCreation(e){this.dateCreation=e}getMessages(){return this.messages}setMessages(e){this.messages=e}getUtilisateur(){return this.utilisateur}setUtilisateur(e){this.utilisateur=e}getIdDossier(){return this.idDossier}setIdDossier(e){this.idDossier=e}toJSON(){return{id:this.id,nom:this.nom,dateCreation:this.dateCreation.toISOString(),messages:this.messages.map(e=>e.toJSON()),utilisateur:this.utilisateur.toJSON(),idDossier:this.idDossier}}static fromJSON(e){let t=new a;return t.setId(e.id),t.setNom(e.nom),t.setDateCreation(new Date(e.dateCreation)),t.setIdDossier(e.idDossier),t.setMessages(e.messages.map(e=>r.Q.fromJSON(e))),t.setUtilisateur(i._.fromJSON(e.utilisateur)),t}constructor(){this.id="",this.nom="",this.dateCreation=new Date,this.messages=[],this.utilisateur=new i._,this.idDossier=""}}},4650:(e,t,s)=>{"use strict";s.d(t,{Q:()=>i});var r=s(730);class i{getContenu(){return this.contenu}setContenu(e){this.contenu=e}getDate(){return this.date}setDate(e){this.date=e}getUtilisateur(){return this.utilisateur}setUtilisateur(e){this.utilisateur=e}toJSON(){return{contenu:this.contenu,date:this.date.toISOString(),utilisateur:this.utilisateur.toJSON()}}static fromJSON(e){let t=new i;return t.setContenu(e.contenu),t.setDate(new Date(e.date)),t.setUtilisateur(r._.fromJSON(e.utilisateur)),t}constructor(){this.contenu="",this.date=new Date,this.utilisateur=new r._}}},5170:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(4799);function i(e){let{message:t,type:s="info"}=e,i="";switch(s){case"error":i="bg-red-100 text-red-700 border border-red-400";break;case"loading":i="bg-blue-100 text-blue-700 border border-blue-400 animate-pulse";break;default:i="bg-gray-100 text-gray-700 border border-gray-300"}return(0,r.jsx)("div",{className:"".concat("rounded-md p-4 text-center text-lg font-semibold max-w-md mx-auto select-none"," ").concat(i),children:t})}},5496:(e,t,s)=>{"use strict";s.d(t,{default:()=>h});var r=s(4799),i=s(1463),a=s.n(i);function n(e){let{dossier:t}=e;return(0,r.jsxs)("div",{className:"text-left p-4 w-full rounded-lg border border-stone-200 bg-gradient-to-b from-white via-neutral-50 to-stone-100   shadow-sm hover:shadow-lg hover:border-primary hover:scale-[1.01] transition-all duration-300 group",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-2 border-b border-stone-300 pb-2",children:(0,r.jsx)(a(),{href:"/blogs/".concat(t.getId()),className:"text-xl font-bold text-primary-dark hover:text-cyan-600 transition-colors relative after:absolute after:left-0 after:-bottom-1 after:w-0 after:h-0.5 after:bg-cyan-600 group-hover:after:w-full after:transition-all after:duration-300",children:t.getTitre()})}),(0,r.jsx)("div",{className:"text-neutral-dark text-base leading-relaxed",children:t.getDescription()}),(0,r.jsxs)("div",{className:"text-neutral-dark text-base leading-relaxed",children:["Cr\xe9\xe9 par ",t.getUtilisateur().getUsername()]})]})}function o(e){let{dossiers:t}=e;return(0,r.jsxs)("section",{className:"mx-auto px-4",children:[(0,r.jsxs)("div",{className:"text-center mb-10",children:[(0,r.jsx)("h1",{className:"text-6xl font-extrabold text-primary-dark drop-shadow-md leading-tight",children:"Bienvenue sur le Blog de Vacare"}),(0,r.jsxs)("p",{className:"mt-4 max-w-xl mx-auto text-lg text-neutral-700 leading-relaxed px-2",children:["Anciennement blog de Vince et de son meilleur ami, ce forum est aujourd'hui celui de Vacare et, par cons\xe9quent, de ",(0,r.jsx)("strong",{children:"N0Realis"}),".",(0,r.jsx)("br",{}),"Espace r\xe9serv\xe9 aux employ\xe9s autoris\xe9s, ne contactez Vacare qu'en cas de n\xe9cessit\xe9 absolue.",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Nos r\xeaves deviendront r\xe9alit\xe9."})]})]}),(0,r.jsx)("div",{className:"bg-white/70 backdrop-blur-md rounded-xl shadow-lg p-6 max-w-4xl mx-auto",children:(0,r.jsx)("ul",{className:"divide-y divide-stone-200",children:t.map(e=>(0,r.jsx)("li",{className:"py-5 hover:bg-stone-50 transition px-4 rounded-md",children:(0,r.jsx)(n,{dossier:e})},e.getId()))})})]})}var u=s(5170),l=s(4023),d=s(188),c=s(7828);function h(e){let{dossiersPrecharges:t}=e,s=t?t.map(e=>c.O.fromJSON(e)):[],[i,a]=(0,l.useState)(s),[n,h]=(0,l.useState)(!t),[m,g]=(0,l.useState)(null),{dossiers:p,loading:f,error:x}=function(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[i,a]=(0,l.useState)(null);return(0,l.useEffect)(()=>{!async function(){r(!0),a(null);try{let e=d.E.get(d.P.I_BlogService),s=await e.getAllDossiers();t(s)}catch(e){a(e)}finally{r(!1)}}()},[]),{dossiers:e,loading:s,error:i}}();return((0,l.useEffect)(()=>{t||(a(p),h(f),g(x))},[t,p,f,x]),n)?(0,r.jsx)(u.A,{message:"Chargement des dossiers...",type:"loading"}):m?(0,r.jsx)(u.A,{message:"Erreur : ".concat(m.message),type:"error"}):(0,r.jsx)(o,{dossiers:i})}},7828:(e,t,s)=>{"use strict";s.d(t,{O:()=>i});var r=s(730);class i{getId(){return this.id}setId(e){this.id=e}getTitre(){return this.titre}setTitre(e){this.titre=e}getDescription(){return this.description}setDescription(e){this.description=e}getUtilisateur(){return this.utilisateur}setUtilisateur(e){this.utilisateur=e}toJSON(){return{id:this.id,titre:this.titre,description:this.description,utilisateur:this.utilisateur.toJSON()}}static fromJSON(e){let t=new i;return t.setId(e.id),t.setTitre(e.titre),t.setDescription(e.description),t.setUtilisateur(r._.fromJSON(e.utilisateur)),t}constructor(){this.id="",this.titre="",this.description="",this.utilisateur=new r._}}},8390:(e,t,s)=>{Promise.resolve().then(s.bind(s,5496))}},e=>{e.O(0,[463,408,89,358],()=>e(e.s=8390)),_N_E=e.O()}]);