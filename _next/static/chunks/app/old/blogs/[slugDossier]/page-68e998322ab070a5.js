(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43,327],{857:(e,s,r)=>{Promise.resolve().then(r.bind(r,3053))},1545:(e,s,r)=>{"use strict";r.d(s,{f:()=>l});var n=r(4799),t=r(6886),a=r(8545);function c(e){let{message:s,type:r="info"}=e,c=(0,t.r)(),l=(0,a.k)(c),o=l.messageBase,i="";switch(r){case"error":i=l.messageErreur;break;case"loading":i=l.messageChargement;break;default:i=l.messageDefaut}return(0,n.jsx)("div",{className:"".concat(o," ").concat(i),children:s})}function l(e){let{chargement:s,erreur:r,estVide:t,chargementMessage:a="Chargement en cours...",messageVide:l="Aucune donn\xe9e disponible",children:o}=e;return s?(0,n.jsx)(c,{message:a,type:"loading"}):r?(0,n.jsx)(c,{message:"Erreur : ".concat(r.message),type:"error"}):t?(0,n.jsx)(c,{message:l,type:"info"}):(0,n.jsx)("div",{children:o})}},2218:(e,s,r)=>{"use strict";r.d(s,{Jx:()=>i,R0:()=>l,Ux:()=>o});var n=r(1087),t=r(8384),a=r(1057);let c=n.E.get(n.I.I_BlogService);function l(e){return(0,a.S)(e=>c.recupererBlogsDuDossier(e),[e],{actif:!!e})}function o(e,s){return(0,a.S)((e,s)=>c.recupererBlogParSlug(e,s),[s,e],{actif:!!e&&!!s})}function i(){return(0,t.L)(async(e,s,r)=>{await c.creerBlog(e,s,r)})}},3053:(e,s,r)=>{"use strict";r.d(s,{default:()=>v});var n=r(4799),t=r(2218),a=r(1463),c=r.n(a),l=r(6886),o=r(8545);function i(e){let{blog:s,slugDossier:r}=e,t=s.getDateCreation().toLocaleDateString("fr-FR"),a=(0,l.r)(),i=(0,o.k)(a),u="modern"==a?"":"/"+a;return(0,n.jsx)("div",{className:i.BlogItemConteneur,children:(0,n.jsxs)("div",{className:i.BlogItemSousConteneur,children:[(0,n.jsx)(c(),{href:"".concat(u,"/messages/").concat(r,"/").concat(s.getSlug()),className:i.BlogItemLien,"aria-label":"Voir le blog ".concat(s.getNom()),children:s.getNom()}),(0,n.jsxs)("span",{className:i.BlogItemSpan,children:["Cr\xe9\xe9 le ",t," par ",(0,n.jsx)("strong",{children:s.getUtilisateur().getUsername()})]}),(0,n.jsx)("p",{className:i.BlogItemContenu,children:s.getMessages()[0].getContenu()})]})})}function u(e){let{blogs:s,slugDossier:r}=e,t=(0,l.r)(),a=(0,o.k)(t);return 0===s.length?(0,n.jsx)("div",{className:a.listeBlogsAucunBlogConteneur,children:(0,n.jsx)("p",{className:a.listeBlogsAucunBlogContenu,children:"Aucun blog trouv\xe9"})}):(0,n.jsx)("div",{className:a.listeBlogsConteneur,children:s.map(e=>(0,n.jsx)(i,{blog:e,slugDossier:r},e.getId()))})}var m=r(1059),g=r(4023),d=r(5030);function h(e){let{onSubmit:s,chargement:r,erreur:t,estConnecte:a}=e,[c,i]=(0,g.useState)(""),[u,m]=(0,g.useState)(""),h=(0,l.r)(),x=(0,o.k)(h),f=async e=>{e.preventDefault(),await s(c,u),i(""),m("")};return a?(0,n.jsx)("section",{className:"mx-auto px-4 py-5 max-w-4xl",children:(0,n.jsxs)("form",{onSubmit:f,className:x.formContainer,children:[(0,n.jsx)("h3",{className:x.formH3,children:"old"==h?"Cr\xe9e ton blog !":"Cr\xe9er un nouveau blog"}),t&&(0,n.jsx)("div",{className:x.messageFormDiv,children:t.message}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"nom",className:x.formLabel,children:"Nom du blog"}),(0,n.jsx)("input",{id:"nom",type:"text",value:c,onChange:e=>i(e.target.value),maxLength:255,className:x.formInput,required:!0}),(0,n.jsx)("label",{htmlFor:"premierMessage",className:x.formLabel,children:"Premier message du blog :"}),(0,n.jsx)("textarea",{id:"premierMessage",value:u,onChange:e=>m(e.target.value),rows:3,className:x.formInput,required:!0}),(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)("button",{type:"submit",disabled:r,className:x.formBouton,children:r?"Cr\xe9ation en cours...":"old"==h?"Cr\xe9er ton blog !":"Cr\xe9er le blog"})})]})]})}):(0,n.jsx)(d.I,{message:"Vous devez \xeatre connect\xe9 pour cr\xe9er un blog."})}var x=r(1527),f=r(6911),j=r(4216),p=r(1545);function v(e){let{slugDossier:s,blogsPrecharges:r}=e,{donnees:a,chargement:c,erreur:l,refetch:o}=(0,t.R0)(s),{donnees:i}=(0,f.F_)(s),{mutation:g,chargement:d,erreur:v}=(0,t.Jx)(),{estConnecte:N}=(0,x.S)(),{donnees:b,chargement:C,erreur:S}=(0,j.T)(a,c,l,r,m.d.fromJSON),B=async(e,s)=>{if(!i)throw Error("Identifiant du dossier manquant");await g(e,s,i.getId()),o()};return(0,n.jsxs)(p.f,{chargement:C,erreur:S,estVide:0==b.length,messageVide:"Aucun blog trouv\xe9",chargementMessage:"Chargement des blogs...",children:[(0,n.jsx)(h,{onSubmit:B,chargement:d,erreur:v,estConnecte:N}),(0,n.jsx)(u,{blogs:b,slugDossier:s})]})}},4216:(e,s,r)=>{"use strict";function n(e,s,r,n,t){let a,c=!n&&s,l=n?null:r;return{donnees:a=n?n.map(t):e?Array.isArray(e)?e:[e]:[],chargement:c,erreur:l,estVide:0===a.length}}r.d(s,{T:()=>n})},5030:(e,s,r)=>{"use strict";r.d(s,{I:()=>o});var n=r(4799),t=r(6886),a=r(8545),c=r(1463),l=r.n(c);function o(e){let{message:s}=e,r=(0,t.r)(),c=(0,a.k)(r),o="modern"==r?"":"/"+r;return(0,n.jsx)("section",{className:"mx-auto px-4 py-5 max-w-4xl",children:(0,n.jsxs)("div",{className:c.accesRestreintDiv,children:[(0,n.jsx)("div",{className:c.accesRestreintConteneurH3,children:(0,n.jsx)("h3",{className:c.accesRestreintH3,children:"Acc\xe8s restreint"})}),(0,n.jsx)("p",{className:c.accesRestreintMessage,children:s}),(0,n.jsx)(l(),{href:o+"/connexion",className:c.accesRestreintLien,children:"Se connecter"})]})})}},6911:(e,s,r)=>{"use strict";r.d(s,{F_:()=>o,Gm:()=>i,Ox:()=>l});var n=r(1087),t=r(8384),a=r(1057);let c=n.E.get(n.I.I_DossierService);function l(){return(0,a.S)(()=>c.recupererDossiers(),[])}function o(e){return(0,a.S)(e=>c.recupererDossierParSlug(e),[e],{actif:!!e})}function i(){return(0,t.L)(async(e,s)=>{await c.creerDossier(e,s)})}}},e=>{e.O(0,[463,136,408,89,358],()=>e(e.s=857)),_N_E=e.O()}]);