(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532,712],{821:(e,s,r)=>{Promise.resolve().then(r.bind(r,9261))},1545:(e,s,r)=>{"use strict";r.d(s,{f:()=>i});var a=r(4799),t=r(6886),n=r(8545);function c(e){let{message:s,type:r="info"}=e,c=(0,t.r)(),i=(0,n.k)(c),o=i.messageBase,l="";switch(r){case"error":l=i.messageErreur;break;case"loading":l=i.messageChargement;break;default:l=i.messageDefaut}return(0,a.jsx)("div",{className:"".concat(o," ").concat(l),children:s})}function i(e){let{chargement:s,erreur:r,estVide:t,chargementMessage:n="Chargement en cours...",messageVide:i="Aucune donn\xe9e disponible",children:o}=e;return s?(0,a.jsx)(c,{message:n,type:"loading"}):r?(0,a.jsx)(c,{message:"Erreur : ".concat(r.message),type:"error"}):t?(0,a.jsx)(c,{message:i,type:"info"}):(0,a.jsx)("div",{children:o})}},2218:(e,s,r)=>{"use strict";r.d(s,{Jx:()=>l,R0:()=>i,Ux:()=>o});var a=r(1087),t=r(8384),n=r(1057);let c=a.E.get(a.I.I_BlogService);function i(e){return(0,n.S)(e=>c.recupererBlogsDuDossier(e),[e],{actif:!!e})}function o(e,s){return(0,n.S)((e,s)=>c.recupererBlogParSlug(e,s),[s,e],{actif:!!e&&!!s})}function l(){return(0,t.L)(async(e,s,r)=>{await c.creerBlog(e,s,r)})}},4216:(e,s,r)=>{"use strict";function a(e,s,r,a,t){let n,c=!a&&s,i=a?null:r;return{donnees:n=a?a.map(t):e?Array.isArray(e)?e:[e]:[],chargement:c,erreur:i,estVide:0===n.length}}r.d(s,{T:()=>a})},5030:(e,s,r)=>{"use strict";r.d(s,{I:()=>o});var a=r(4799),t=r(6886),n=r(8545),c=r(1463),i=r.n(c);function o(e){let{message:s}=e,r=(0,t.r)(),c=(0,n.k)(r),o="modern"==r?"":"/"+r;return(0,a.jsx)("section",{className:"mx-auto px-4 py-5 max-w-4xl",children:(0,a.jsxs)("div",{className:c.accesRestreintDiv,children:[(0,a.jsx)("div",{className:c.accesRestreintConteneurH3,children:(0,a.jsx)("h3",{className:c.accesRestreintH3,children:"Acc\xe8s restreint"})}),(0,a.jsx)("p",{className:c.accesRestreintMessage,children:s}),(0,a.jsx)(i(),{href:o+"/connexion",className:c.accesRestreintLien,children:"Se connecter"})]})})}},9261:(e,s,r)=>{"use strict";r.d(s,{default:()=>b});var a=r(4799),t=r(4023),n=r(5030),c=r(6886),i=r(8545);function o(e){let{onSubmit:s,chargement:r,erreur:o,estConnecte:l}=e,[u,m]=(0,t.useState)(""),g=(0,c.r)(),d=(0,i.k)(g),h=async e=>{e.preventDefault(),await s(u),m("")};return l?(0,a.jsx)("section",{className:"mx-auto px-4 py-5 max-w-4xl",children:(0,a.jsxs)("form",{onSubmit:h,className:d.formContainer,children:[(0,a.jsx)("h3",{className:d.formH3,children:"old"==g?"Ajoute ta r\xe9ponse au blog !":"R\xe9pondre"}),o&&(0,a.jsx)("div",{className:d.messageFormDiv,children:o.message}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"nom",className:d.formLabel,children:"Votre r\xe9ponse :"}),(0,a.jsx)("textarea",{id:"nom",rows:4,value:u,onChange:e=>m(e.target.value),className:d.formInput,required:!0}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{type:"submit",disabled:r,className:d.formBouton,children:r?"R\xe9ponse en cours...":"R\xe9pondre au blog"})})]})]})}):(0,a.jsx)(n.I,{message:"Vous devez \xeatre connect\xe9 pour r\xe9pondre \xe0 un blog."})}var l=r(2371);function u(e){let{message:s}=e,r="/assets/BlogVacare/Icones/".concat(s.getUtilisateur().getUsername(),".jpg"),[n,o]=(0,t.useState)(r),u=s.getDate().toLocaleString("fr-FR"),m=(0,c.r)(),g=(0,i.k)(m);return(0,a.jsxs)("div",{className:g.messageItem,children:[(0,a.jsx)("div",{className:g.messageImgConteneur,children:(0,a.jsx)(l.default,{className:g.messageImg,src:n,alt:"Avatar de ".concat(s.getUtilisateur().getUsername()),width:96,height:96,onError:()=>o("/assets/BlogVacare/Icones/Vince.jpg")})}),(0,a.jsxs)("div",{className:g.messageConteneur,children:[(0,a.jsx)("span",{className:g.messagecontenuPseudo,children:s.getUtilisateur().getUsername()}),(0,a.jsx)("p",{className:g.messageContenu,children:s.getContenu()}),(0,a.jsxs)("span",{className:g.messageDate,children:["Post\xe9 le ",u]})]})]})}function m(e){let{messages:s}=e,r=[],t=(0,c.r)(),n=(0,i.k)(t);return"modern"==t?s.forEach(e=>{null==e.getElementSupprime()&&r.push(e)}):r=s,(0,a.jsx)("div",{className:n.messageList,children:r.map(e=>(0,a.jsx)(u,{message:e},e.getDate().toISOString()+e.getUtilisateur()))})}var g=r(1545),d=r(1527),h=r(2218),x=r(4216),f=r(1087),j=r(8384),p=r(1057);let v=f.E.get(f.I.I_MessageService);var N=r(4650);function b(e){let{slugDossier:s,slugBlog:r,messagesPrecharges:t}=e,{donnees:n,chargement:c,erreur:i,refetch:l}=(0,p.S)((e,s)=>v.recupererMessagesDuBlog(e,s),[s,r],{actif:!!s&&!!r}),{donnees:u}=(0,h.Ux)(s,r),{mutation:f,chargement:b,erreur:S}=(0,j.L)(async(e,s)=>{await v.creerMessage(e,s)}),{estConnecte:I}=(0,d.S)(),{donnees:C,chargement:w,erreur:y}=(0,x.T)(n,c,i,t,N.Q.fromJSON),k=async e=>{if(!u)throw Error("Identifiant du blog manquant");await f(e,u.getId()),l()};return(0,a.jsxs)(g.f,{chargement:w,erreur:y,estVide:0==C.length,messageVide:"Aucun message trouv\xe9",chargementMessage:"Chargement des messages...",children:[(0,a.jsx)(m,{messages:C}),(0,a.jsx)(o,{onSubmit:k,chargement:b,erreur:S,estConnecte:I})]})}}},e=>{e.O(0,[463,371,136,408,89,358],()=>e(e.s=821)),_N_E=e.O()}]);