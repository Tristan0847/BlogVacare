(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{2103:(e,t,r)=>{"use strict";r.d(t,{y:()=>i});var a=r(533),s=r.n(a),n=r(7011);let l=s().join((0,n.cwd)(),"public","data");s().join(l,"index-recherche.json");var c=r(8495);async function i(e){let{requete:t,options:r={}}=e;try{let{limit:e,threshold:a=.4,autoLoad:s=!0}=r,n=await fetch("/wiki/data/index-recherche.json");if(!n.ok)throw Error("Erreur lors du chargement de l'index de recherche");let l=await n.json(),i=[];if(l.length>0){let r=new c.A(l,{keys:[{name:"titre",weight:2},{name:"categorie",weight:1},{name:"sousCategorie",weight:.8},{name:"auteur",weight:1.5},{name:"extrait",weight:.5},{name:"tags",weight:1}],threshold:a,includeScore:!0,minMatchCharLength:2,ignoreLocation:!0});r&&0!==t.trim().length&&(i=r.search(t.trim(),e?{limit:e}:void 0).map(e=>e.item))}return{resultats:i,enChargement:!1,erreur:null}}catch(e){return{resultats:[],enChargement:!1,erreur:e.message}}}},2414:(e,t,r)=>{Promise.resolve().then(r.bind(r,6097))},6097:(e,t,r)=>{"use strict";r.d(t,{PageDeRecherche:()=>u});var a=r(4568),s=r(7620),n=r(7541),l=r(9664),c=r.n(l),i=r(2103),o=r(8963),d=r(2536);function u(){let e=(0,n.useSearchParams)().get("requete")||"",[t,r]=(0,s.useState)(e),[l,u]=(0,s.useState)(""),[g,m]=(0,s.useState)(new Set),[x,p]=(0,s.useState)("pertinence"),[b,f]=(0,s.useState)("desc"),[y,j]=(0,s.useState)(new Set),[v,N]=(0,s.useState)([]),[w,C]=(0,s.useState)(!1),[S,k]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){if(t.trim().length>2){C(!0);let{resultats:e,enChargement:r,erreur:a}=await (0,i.y)({requete:t,options:{limit:20}});N(e),C(r),k(a)}else N([])}()},[t]);let E=(0,s.useMemo)(()=>{let e=v;return l&&(e=e.filter(e=>e.categorie===l)),g.size>0&&(e=e.filter(e=>e.tags.some(e=>g.has(e)))),"date"===x?e=[...e].sort((e,t)=>new Date(t.dateCreation).getTime()-new Date(e.dateCreation).getTime()):"titre"===x&&(e=[...e].sort((e,t)=>e.titre.localeCompare(t.titre))),y.size>0&&(e=e.filter(e=>y.has(e.auteur))),"asc"===b&&(e=e.reverse()),e},[v,l,g,x,b]),R=(0,s.useMemo)(()=>Array.from(new Set(v.map(e=>e.categorie))),[v]),L=(0,s.useMemo)(()=>{let e=new Set;return v.forEach(t=>t.tags.forEach(t=>e.add(t))),Array.from(e).sort()},[v]),D=(0,s.useMemo)(()=>{let e=new Set;return v.forEach(t=>e.add(t.auteur)),Array.from(e).sort()},[v]);return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:"Recherche d'articles"}),(0,a.jsx)(o.k,{requeteInitiale:t,placeholder:"Rechercher un article...",montrerSuggestions:!1,autoFocus:!0,onChangementRequete:e=>r(e),onResultats:e=>r(e),className:"max-w-3xl"}),(0,a.jsx)("div",{className:"mt-4 text-gray-400 text-sm",children:w?"Chargement...":t.length<2?"Veuillez entrer au moins 2 caract\xe8res pour lancer une recherche":"".concat(E.length," r\xe9sultat").concat(E.length>1?"s":"",' pour "').concat(t,'"')})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[250px_1fr] gap-8",children:[t.length>=2&&v.length>0&&(0,a.jsxs)("aside",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-white mb-3",children:"Ordre du tri"}),(0,a.jsxs)("button",{onClick:()=>{f("asc"===b?"desc":"asc")},className:"relative inline-flex items-center gap-2 px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-all duration-300 text-sm w-full justify-center group",children:[(0,a.jsx)("span",{className:"transition-all duration-300 ".concat("asc"===b?"text-green-400 font-semibold":"text-gray-400"),children:"Croissant"}),(0,a.jsx)("div",{className:"w-px h-4 bg-gray-500"}),(0,a.jsx)("span",{className:"transition-all duration-300 ".concat("desc"===b?"text-green-400 font-semibold":"text-gray-400"),children:"D\xe9croissant"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-white mb-3",children:"Trier par"}),(0,a.jsx)("div",{className:"space-y-2",children:[{value:"pertinence",label:"Pertinence"},{value:"date",label:"Date"},{value:"titre",label:"Titre"}].map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"tri",checked:x===e.value,onChange:()=>p(e.value),className:"text-blue-500"}),e.label]},e.value))})]}),R.length>1&&(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-white mb-3",children:"Cat\xe9gorie"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"categorie",checked:!l,onChange:()=>u("")}),"Toutes"]}),R.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-300 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"categorie",checked:l===e,onChange:()=>u(e)}),e]},e))]})]}),D.length>0&&(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-white mb-3",children:"Auteurs"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:D.slice(0,20).map(e=>(0,a.jsx)("button",{onClick:()=>(e=>{let t=new Set(y);t.has(e)?t.delete(e):t.add(e),j(t)})(e),className:"px-2 py-1 text-xs rounded transition-colors ".concat(y.has(e)?"bg-green-700 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e},e))})]}),L.length>0&&(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-white mb-3",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:L.slice(0,20).map(e=>(0,a.jsxs)("button",{onClick:()=>(e=>{let t=new Set(g);t.has(e)?t.delete(e):t.add(e),m(t)})(e),className:"px-2 py-1 text-xs rounded transition-colors ".concat(g.has(e)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:["#",e]},e))})]})]}),(0,a.jsx)("div",{children:w?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full"})}):0===E.length?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"flex items-center justify-center flex-col space-y-6",children:[(0,a.jsx)(d.default,{src:"/wiki/assets/logo/Triquetra blanc.png",alt:"",width:200,height:200,className:"opacity-50 w-32 h-32 sm:w-48 sm:h-48 md:w-64 md:h-64"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm sm:text-base md:text-lg px-4",children:t.length<2?"Entrez au moins 2 caract\xe8res pour rechercher":(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c(),{className:"hover:line-through",href:"/journal-d-anti-r/recherche-de-soi",children:"Aucun r\xe9sultat"}),' pour "',t,'"']})})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:E.map(e=>(0,a.jsx)(h,{article:e,requete:t},e.slug))})})]})]})})}function h(e){let{article:t,requete:r}=e,s=t.titre.toLowerCase()==r.toLowerCase()?"border-blue-600 border-2 p-4 rounded-lg hover:border-blue-700":"border border-gray-700 hover:border-gray-600";return(0,a.jsxs)(c(),{href:"/article/".concat(t.slug),className:"block p-6 bg-gray-800 rounded-lg hover:scale-101 transition-all duration-200 group ".concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:t.categorie}),t.sousCategorie&&(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-700 text-gray-200 text-xs rounded",children:t.sousCategorie})]}),(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-2 group-hover:text-blue-300 transition-colors",children:t.titre}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm mb-4 line-clamp-3",children:[t.extrait,"..."]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Par ",t.auteur]}),(0,a.jsx)("span",{children:new Date(t.dateCreation).toLocaleDateString("fr-FR")})]}),t.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:t.tags.slice(0,3).map(e=>(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-300 text-xs rounded",children:["#",e]},e))})]})}},8963:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var a=r(4568),s=r(2103),n=r(9664),l=r.n(n),c=r(7541),i=r(7620);function o(e){let{requeteInitiale:t="",placeholder:r="Rechercher un article...",suggestionsMax:n=5,montrerSuggestions:l=!0,onResultats:o,onChangementRequete:u,className:h="",autoFocus:g=!1}=e,[m,x]=(0,i.useState)(t),[p,b]=(0,i.useState)(!1),f=(0,i.useRef)(null),y=(0,i.useRef)(null),j=(0,c.useRouter)(),[v,N]=(0,i.useState)([]),[w,C]=(0,i.useState)(!1),[S,k]=(0,i.useState)(null);(0,i.useEffect)(()=>{!async function(){if(m.trim().length>2){C(!0);let{resultats:e,enChargement:t,erreur:r}=await (0,s.y)({requete:m,options:{limit:n}});N(e),C(t),k(r)}}()},[m,n]),(0,i.useEffect)(()=>{function e(e){f.current&&e.target instanceof Node&&!f.current.contains(e.target)&&b(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,i.useEffect)(()=>{x(t)},[t]);let E=e=>{b(!1),j.push("/wiki/article/".concat(e.slug))};return(0,a.jsxs)("div",{className:"relative ".concat(h),ref:f,children:[(0,a.jsx)("input",{type:"text",value:m,autoFocus:g,placeholder:r,ref:y,onChange:e=>{var t;x(t=e.target.value),b(!0),null==u||u(t)},onFocus:()=>{l&&b(!0)},onKeyDown:e=>{"Enter"===e.key&&(b(!1),o?o(m):v.length>=1&&v[0].titre.toLowerCase()===m.trim().toLowerCase()?j.push("/article/".concat(v[0].slug)):j.push("/recherche?requete=".concat(encodeURIComponent(m))))},className:"w-full border border-gray-500 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-800"}),p&&l&&m.trim().length>2&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-700 border border-gray-500 rounded-md shadow-lg z-10 max-h-60 overflow-y-auto",children:[w&&(0,a.jsx)("div",{className:"p-4 text-gray-200",children:"Chargement des suggestions..."}),S&&(0,a.jsxs)("div",{className:"p-4 text-red-500",children:["Erreur lors de la recherche : ",S]}),!w&&!S&&0===v.length&&(0,a.jsx)("div",{className:"p-4 text-gray-200",children:"Aucun r\xe9sultat trouv\xe9."}),!w&&!S&&v.map(e=>(0,a.jsx)(d,{article:e,onClic:E},e.slug))]})]})}function d(e){let{article:t,onClic:r}=e;return(0,a.jsx)(l(),{href:"/article/".concat(t.slug),onClick:()=>r(t),className:"block px-4 py-2 border-b border-gray-700 hover:bg-gray-600 transition-colors",children:(0,a.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-white truncate",children:t.titre}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 truncate",children:[t.categorie,", ",t.sousCategorie]}),(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate",children:t.extrait})]})})})}}},e=>{e.O(0,[664,536,311,587,18,358],()=>e(e.s=2414)),_N_E=e.O()}]);